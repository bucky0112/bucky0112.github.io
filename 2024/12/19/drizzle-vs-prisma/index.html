<!DOCTYPE html><html lang="zh-TW" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Drizzle v.s Prisma | Bucky's Code Journey</title><meta name="keywords" content="orm,express,drizzle,prisma"><meta name="author" content="Bucky Chu"><meta name="copyright" content="Bucky Chu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ç›®å‰çš„ JavaScript çš„ç”Ÿæ…‹åœˆä¸­ï¼Œæœ‰å¾ˆå¤šå‡ºè‰²çš„ SQL ORMï¼Œé€™äº› ORM éƒ½æ˜¯ç‚ºäº†å¹«åŠ©é–‹ç™¼è€…èƒ½å¤ æœ‰æ›´å¥½çš„é–‹ç™¼é«”é©—ï¼Œè€Œæ–°çš„ 2024 JavaScript Rising Stars æ¦œå–®å‡ºçˆäº†ï¼Œé€™ç¯‡æ–‡ç« å°‡æœƒä¾†ä»‹ç´¹ Prisma è·Ÿ Drizzle é€™å…©å€‹ç†±é–€çš„ ORMï¼Œä¸¦ä¸”æ¯”è¼ƒå…©è€…æœ‰ä»€éº¼å·®ç•°ã€‚ å®‰è£æ¯”è¼ƒé€™ç¯‡æ–‡ç« å°‡æœƒä»¥ Express ä¾†åšå®‰è£ ORM çš„æ¯”è¼ƒï¼Œä¸¦ä¸”åªä»¥ JavaScrip">
<meta property="og:type" content="article">
<meta property="og:title" content="Drizzle v.s Prisma">
<meta property="og:url" content="http://buckychu.im/2024/12/19/drizzle-vs-prisma/index.html">
<meta property="og:site_name" content="Bucky&#39;s Code Journey">
<meta property="og:description" content="ç›®å‰çš„ JavaScript çš„ç”Ÿæ…‹åœˆä¸­ï¼Œæœ‰å¾ˆå¤šå‡ºè‰²çš„ SQL ORMï¼Œé€™äº› ORM éƒ½æ˜¯ç‚ºäº†å¹«åŠ©é–‹ç™¼è€…èƒ½å¤ æœ‰æ›´å¥½çš„é–‹ç™¼é«”é©—ï¼Œè€Œæ–°çš„ 2024 JavaScript Rising Stars æ¦œå–®å‡ºçˆäº†ï¼Œé€™ç¯‡æ–‡ç« å°‡æœƒä¾†ä»‹ç´¹ Prisma è·Ÿ Drizzle é€™å…©å€‹ç†±é–€çš„ ORMï¼Œä¸¦ä¸”æ¯”è¼ƒå…©è€…æœ‰ä»€éº¼å·®ç•°ã€‚ å®‰è£æ¯”è¼ƒé€™ç¯‡æ–‡ç« å°‡æœƒä»¥ Express ä¾†åšå®‰è£ ORM çš„æ¯”è¼ƒï¼Œä¸¦ä¸”åªä»¥ JavaScrip">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2024-12-19T02:55:45.000Z">
<meta property="article:modified_time" content="2025-01-16T10:33:02.051Z">
<meta property="article:author" content="Bucky Chu">
<meta property="article:tag" content="orm">
<meta property="article:tag" content="express">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://buckychu.im/2024/12/19/drizzle-vs-prisma/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-163831260-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-163831260-1');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'è¤‡è£½æˆåŠŸ',
    error: 'è¤‡è£½éŒ¯èª¤',
    noSupport: 'ç€è¦½å™¨ä¸æ”¯æ´'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'å‰›å‰›',
    min: 'åˆ†é˜å‰',
    hour: 'å°æ™‚å‰',
    day: 'å¤©å‰',
    month: 'å€‹æœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-01-16 18:33:02'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">107</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ¨™ç±¤</div><div class="length-num">118</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†é¡</div><div class="length-num">27</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é </span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ™‚é–“è»¸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ¨™ç±¤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†é¡</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹éˆ</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Bucky's Code Journey</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é </span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ™‚é–“è»¸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ¨™ç±¤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†é¡</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹éˆ</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Drizzle v.s Prisma</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">ç™¼è¡¨æ–¼</span><time class="post-meta-date-created" datetime="2024-12-19T02:55:45.000Z" title="ç™¼è¡¨æ–¼ 2024-12-19 10:55:45">2024-12-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°æ–¼</span><time class="post-meta-date-updated" datetime="2025-01-16T10:33:02.051Z" title="æ›´æ–°æ–¼ 2025-01-16 18:33:02">2025-01-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%A5%BD%E7%94%A8%E5%87%BD%E5%BC%8F%E5%BA%AB%E4%BB%8B%E7%B4%B9/">å¥½ç”¨å‡½å¼åº«ä»‹ç´¹</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Drizzle v.s Prisma"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é–±è®€é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>ç›®å‰çš„ JavaScript çš„ç”Ÿæ…‹åœˆä¸­ï¼Œæœ‰å¾ˆå¤šå‡ºè‰²çš„ SQL ORMï¼Œé€™äº› ORM éƒ½æ˜¯ç‚ºäº†å¹«åŠ©é–‹ç™¼è€…èƒ½å¤ æœ‰æ›´å¥½çš„é–‹ç™¼é«”é©—ï¼Œè€Œæ–°çš„ <a target="_blank" rel="noopener" href="https://risingstars.js.org/2024/en">2024 JavaScript Rising Stars</a> æ¦œå–®å‡ºçˆäº†ï¼Œé€™ç¯‡æ–‡ç« å°‡æœƒä¾†ä»‹ç´¹ Prisma è·Ÿ Drizzle é€™å…©å€‹ç†±é–€çš„ ORMï¼Œä¸¦ä¸”æ¯”è¼ƒå…©è€…æœ‰ä»€éº¼å·®ç•°ã€‚</p>
<h2 id="å®‰è£æ¯”è¼ƒ"><a href="#å®‰è£æ¯”è¼ƒ" class="headerlink" title="å®‰è£æ¯”è¼ƒ"></a>å®‰è£æ¯”è¼ƒ</h2><p>é€™ç¯‡æ–‡ç« å°‡æœƒä»¥ Express ä¾†åšå®‰è£ ORM çš„æ¯”è¼ƒï¼Œä¸¦ä¸”åªä»¥ JavaScript è€Œä¸æ˜¯ TypeScriptã€‚</p>
<p>ä¸€é–‹å§‹çš„ Express å°ˆæ¡ˆæ˜¯ä»¥æœ€ç°¡æ˜“çš„æ¶æ§‹ä¾†å®‰è£ï¼Œç¾åœ¨ Express çš„æ¶æ§‹å¤§æ¦‚æ˜¯é€™æ¨£ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ ğŸ“œ package-lock.json</span><br><span class="line">â”œâ”€â”€ ğŸ“œ package.json</span><br><span class="line">â””â”€â”€ ğŸ“‚ src</span><br><span class="line">    â””â”€â”€ ğŸ“œ index.js</span><br></pre></td></tr></table></figure>

<p>ç¾åœ¨çš„ <code>index.js</code> é€™æ¨£å¯ä»¥æ‹¿åˆ° Hello Worldï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server is running on port 3000&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Drizzle"><a href="#Drizzle" class="headerlink" title="Drizzle"></a>Drizzle</h3><p>å…ˆå¾ Drizzle çš„å®‰è£é–‹å§‹ï¼Œdrizzle æ”¯æ´è¨±å¤šè³‡æ–™åº«ï¼Œåƒæ˜¯ PostgreSQL å’Œ MySQL éƒ½æœ‰ï¼Œé€™æ¬¡æœƒä½¿ç”¨ PostgreSQL çš„æ–¹å¼ã€‚</p>
<h4 id="1-å®‰è£-drizzle-å’Œ-pg"><a href="#1-å®‰è£-drizzle-å’Œ-pg" class="headerlink" title="1. å®‰è£ drizzle å’Œ pg"></a>1. å®‰è£ drizzle å’Œ pg</h4><p>é€™è£¡å¯ä»¥ç›´æ¥æŒ‰ç…§å®˜ç¶²çš„æ–¹å¼ä¾†å®‰è£ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i drizzle-orm pg</span><br><span class="line">npm i -D drizzle-kit @types/pg</span><br></pre></td></tr></table></figure>

<h4 id="2-é€£æ¥è³‡æ–™åº«"><a href="#2-é€£æ¥è³‡æ–™åº«" class="headerlink" title="2. é€£æ¥è³‡æ–™åº«"></a>2. é€£æ¥è³‡æ–™åº«</h4><p>æ¥ä¸‹ä¾†åœ¨å°ˆæ¡ˆä¸­æ–°å¢ä¸€å€‹ <code>.env</code> çš„ç’°å¢ƒè®Šæ•¸ï¼Œè£¡é¢å¯ä»¥é€£æ¥ PG çš„ databaseï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DATABASE_URL=postgresql://postgres:postgres@localhost:5432/drizzle_database</span><br></pre></td></tr></table></figure>

<p>å®‰è£ dotenv ä¾†è™•ç†ç’°å¢ƒè®Šæ•¸ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i dotenv</span><br></pre></td></tr></table></figure>

<p>ç„¶å¾Œä½¿ç”¨ drizzle é€£æ¥ PGï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">const</span> dotenv = <span class="built_in">require</span>(<span class="string">&quot;dotenv&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; drizzle &#125; = <span class="built_in">require</span>(<span class="string">&quot;drizzle-orm/node-postgres&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Pool</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;pg&quot;</span>);</span><br><span class="line">dotenv.<span class="title function_">config</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pool = <span class="keyword">new</span> <span class="title class_">Pool</span>(&#123;</span><br><span class="line">  <span class="attr">connectionString</span>: process.<span class="property">env</span>.<span class="property">DATABASE_URL</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> db = <span class="title function_">drizzle</span>(pool);</span><br></pre></td></tr></table></figure>

<h4 id="3-æ–°å¢-table"><a href="#3-æ–°å¢-table" class="headerlink" title="3. æ–°å¢ table"></a>3. æ–°å¢ table</h4><p>é€™è£¡çš„ä¾‹å­æ˜¯å¾é›¶é–‹å§‹ï¼Œæ‰€ä»¥æˆ‘å€‘éœ€è¦è‡ªå·±å»ºç«‹ä¸€å€‹ schemaï¼Œå»ºè­°åœ¨ src è³‡æ–™å¤¾åº•ä¸‹æ–°å¢ä¸€å€‹è³‡æ–™å¤¾ï¼Œå‘½åç‚º <code>db</code>ï¼Œä¸¦æ–°å¢ä¸€å€‹æª”æ¡ˆ <code>schema.ts</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; integer, pgTable, varchar, text, timestamp &#125; = <span class="built_in">require</span>(<span class="string">&#x27;drizzle-orm/pg-core&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> usersTable = <span class="title function_">pgTable</span>(<span class="string">&#x27;users&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="title function_">integer</span>().<span class="title function_">primaryKey</span>().<span class="title function_">generatedAlwaysAsIdentity</span>(),</span><br><span class="line">  <span class="attr">name</span>: <span class="title function_">varchar</span>(&#123; <span class="attr">length</span>: <span class="number">50</span> &#125;).<span class="title function_">notNull</span>(),</span><br><span class="line">  <span class="attr">age</span>: <span class="title function_">integer</span>().<span class="title function_">notNull</span>(),</span><br><span class="line">  <span class="attr">email</span>: <span class="title function_">varchar</span>(&#123; <span class="attr">length</span>: <span class="number">255</span> &#125;).<span class="title function_">notNull</span>().<span class="title function_">unique</span>(),</span><br><span class="line">  <span class="attr">created_at</span>: <span class="title function_">timestamp</span>().<span class="title function_">defaultNow</span>(),</span><br><span class="line">  <span class="attr">address</span>: <span class="title function_">varchar</span>(&#123; <span class="attr">length</span>: <span class="number">255</span> &#125;).<span class="title function_">notNull</span>()</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> postsTable = <span class="title function_">pgTable</span>(<span class="string">&#x27;posts&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="title function_">integer</span>().<span class="title function_">primaryKey</span>().<span class="title function_">generatedAlwaysAsIdentity</span>(),</span><br><span class="line">  <span class="attr">title</span>: <span class="title function_">varchar</span>(&#123; <span class="attr">length</span>: <span class="number">100</span> &#125;).<span class="title function_">notNull</span>(),</span><br><span class="line">  <span class="attr">content</span>: <span class="title function_">text</span>().<span class="title function_">notNull</span>(),</span><br><span class="line">  <span class="attr">user_id</span>: <span class="title function_">integer</span>().<span class="title function_">references</span>(<span class="function">() =&gt;</span> usersTable.<span class="property">id</span>),</span><br><span class="line">  <span class="attr">created_at</span>: <span class="title function_">timestamp</span>().<span class="title function_">defaultNow</span>(),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  usersTable,</span><br><span class="line">  postsTable</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>é€™è£¡æˆ‘å€‘è©¦è‘—å»ºç«‹ users å’Œ posts çš„è³‡æ–™è¡¨ï¼Œå¦‚æœè¦ä½¿ç”¨å„ç¨®è³‡æ–™åº«çš„å‹åˆ¥ï¼Œå¿…é ˆå¾ drizzle è£¡é¢å–å¾—ç›¸é—œçš„ functionï¼Œä¾‹å¦‚ integerï¼Œå°±è¦ä½¿ç”¨ <code>integer()</code>ã€‚ç„¶å¾Œè¦è¨­å®šé—œè¯çš„è©±ï¼Œä¾‹å¦‚ posts è·Ÿ users æœ‰é—œè¯ï¼Œå¯ä»¥åœ¨ postsTable çš„ user_id è¨­å®š <code>integer()</code>ï¼Œä¸¦ä½¿ç”¨å®ƒè£¡é¢çš„ `references()</p>
<h4 id="4-è¨­å®š-Drizzle-config"><a href="#4-è¨­å®š-Drizzle-config" class="headerlink" title="4. è¨­å®š Drizzle config"></a>4. è¨­å®š Drizzle config</h4><p>è¨­å®šå®Œè³‡æ–™çš„ schema ä¹‹å¾Œï¼Œé‚„éœ€è¦è®“ Drizzle çŸ¥é“é€™å€‹å°ˆæ¡ˆæœ‰å“ªäº› schemaï¼Œé‚„æœ‰é€£çµä»€éº¼è³‡æ–™åº«ï¼Œä¸¦ä¸”è¨­å®šä¹‹å¾Œ migration ç”¢ç”Ÿçš„æª”æ¡ˆæœƒç”¢ç”Ÿåœ¨å“ªè£¡ã€‚</p>
<p>æ‰€ä»¥æˆ‘å€‘éœ€è¦åœ¨æ ¹ç›®éŒ„æ–°å¢ä¸€å€‹ <code>drizzle.config.js</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dotenv = <span class="built_in">require</span>(<span class="string">&quot;dotenv&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;drizzle-kit&#x27;</span>);</span><br><span class="line"></span><br><span class="line">dotenv.<span class="title function_">config</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">out</span>: <span class="string">&#x27;./drizzle&#x27;</span>,</span><br><span class="line">  <span class="attr">schema</span>: <span class="string">&#x27;./src/db/schema.js&#x27;</span>,</span><br><span class="line">  <span class="attr">dialect</span>: <span class="string">&#x27;postgresql&#x27;</span>,</span><br><span class="line">  <span class="attr">dbCredentials</span>: &#123;</span><br><span class="line">    <span class="attr">url</span>: process.<span class="property">env</span>.<span class="property">DATABASE_URL</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="5-æ›´æ–°è³‡æ–™åº«"><a href="#5-æ›´æ–°è³‡æ–™åº«" class="headerlink" title="5. æ›´æ–°è³‡æ–™åº«"></a>5. æ›´æ–°è³‡æ–™åº«</h4><p>åŸ·è¡Œ generate ä¹‹å¾Œï¼Œå°±æœƒåœ¨å°ˆæ¡ˆä¸­å»ºç«‹ä¸€å€‹ <code>drizzle</code> çš„è³‡æ–™å¤¾ï¼Œä¸¦ä¸”è‡ªå‹•æ–°å¢ä¸€äº› sql çš„æª”æ¡ˆã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx drizzle-kit generate</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹ä¾†éœ€è¦é€é ORM å»æ›´æ–° PG è³‡æ–™åº«ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx drizzle-kit migrate</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹ä¾†å¯ä»¥æª¢æŸ¥ PG è³‡æ–™åº«ï¼Œæ‡‰è©²å°±å¯ä»¥çœ‹åˆ°è³‡æ–™åº«æ–°å¢ users å’Œ posts çš„ tableã€‚</p>
<h3 id="Prisma"><a href="#Prisma" class="headerlink" title="Prisma"></a>Prisma</h3><p>Prisma çš„éƒ¨åˆ†ï¼Œä¸€æ¨£æ˜¯æ²¿ç”¨ Drizzle æ‰€ä½¿ç”¨çš„ Express æ¶æ§‹ï¼Œæˆ–è€…æ˜¯è¦é‡æ–°å»ºç«‹ä¸€å€‹ä¹Ÿå¯ä»¥ã€‚</p>
<h4 id="1-å®‰è£-Prisma"><a href="#1-å®‰è£-Prisma" class="headerlink" title="1. å®‰è£ Prisma"></a>1. å®‰è£ Prisma</h4><p>é¦–å…ˆç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯å®‰è£ Prisma ORMï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install prisma @prisma/client</span><br></pre></td></tr></table></figure>

<p>é€™ä¸€æ­¥å®‰è£ï¼Œè·Ÿ Drizzle ä¸ä¸€æ¨£çš„æ˜¯ï¼Œå®ƒæœƒå¹«å°ˆæ¡ˆè‡ªå‹•ç”¢ç”Ÿ <code>.env</code> å’Œ prisma çš„è³‡æ–™å¤¾ï¼Œè€Œä¸”è£¡é¢è‡ªå‹•ç”¢ç”Ÿä¸€å€‹ <code>schema.prisma</code> çš„ç‰¹æ®Šæª”æ¡ˆï¼Œä¸¦ä¸”é è¨­æ˜¯é€£çµ postgresql çš„è¨­å®šï¼Œç•¶ç„¶ Prisma ä¹Ÿæä¾›äº†å¾ˆå¤šä¸åŒè³‡æ–™åº«ï¼Œæœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥å†è€ƒæ…®åˆ‡æ›ã€‚</p>
<h4 id="2-é€£æ¥è³‡æ–™åº«-1"><a href="#2-é€£æ¥è³‡æ–™åº«-1" class="headerlink" title="2. é€£æ¥è³‡æ–™åº«"></a>2. é€£æ¥è³‡æ–™åº«</h4><p>æ¥ä¸‹ä¾†è¦é€£æ¥è³‡æ–™åº«ï¼Œå°±åœ¨ Prisma å¹«æˆ‘å€‘ç”¢ç”Ÿçš„ <code>.env</code> ç’°å¢ƒè®Šæ•¸ä¸­æ¥ä¸Šè³‡æ–™åº«ä½ç½®ã€‚</p>
<h4 id="3-æ–°å¢-table-1"><a href="#3-æ–°å¢-table-1" class="headerlink" title="3. æ–°å¢ table"></a>3. æ–°å¢ table</h4><p>å‰é¢çš„æ­¥é©Ÿåœ¨ prisma çš„è³‡æ–™å¤¾ä¸­ï¼Œç”¢ç”Ÿäº†ä¸€å€‹ <code>schema.prisma</code> çš„æª”æ¡ˆï¼Œé€™å€‹æª”æ¡ˆå¦‚åç¨±æ‰€ç¤ºï¼Œå°±æ˜¯æ‹¿ä¾†æ”¾è³‡æ–™åº«çš„ schemaï¼Œå¦‚æœæ˜¯æŒ‰ç…§å‰é¢çš„ users å’Œ posts å…©å€‹ table æ¶æ§‹çš„è©±ï¼Œæœƒæ˜¯é€™æ¨£ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">model posts &#123;</span><br><span class="line">  id         Int       @id @default(autoincrement())</span><br><span class="line">  title      String    @db.VarChar(100)</span><br><span class="line">  content    String</span><br><span class="line">  user_id    Int?</span><br><span class="line">  created_at DateTime? @default(now()) @db.Timestamp(6)</span><br><span class="line">  users      users?    @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: &quot;posts_user_id_users_id_fk&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">model users &#123;</span><br><span class="line">  id         Int       @id @default(autoincrement())</span><br><span class="line">  name       String    @db.VarChar(50)</span><br><span class="line">  age        Int</span><br><span class="line">  email      String    @unique(map: &quot;users_email_unique&quot;) @db.VarChar(255)</span><br><span class="line">  created_at DateTime? @default(now()) @db.Timestamp(6)</span><br><span class="line">  address    String    @db.VarChar(255)</span><br><span class="line">  posts      posts[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-æ›´æ–°è³‡æ–™åº«"><a href="#4-æ›´æ–°è³‡æ–™åº«" class="headerlink" title="4. æ›´æ–°è³‡æ–™åº«"></a>4. æ›´æ–°è³‡æ–™åº«</h4><p>å»ºç«‹å®Œ table çš„æ¶æ§‹ä¹‹å¾Œï¼Œè¦åŸ·è¡Œ migrate è®“æœ¬åœ°çš„è³‡æ–™åº«åšæ›´æ–°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx prisma migrate dev --name <span class="string">&quot;init&quot;</span></span><br></pre></td></tr></table></figure>

<p>åŸ·è¡Œå®Œä¹‹å¾Œï¼Œå°±æœƒåœ¨ prisma è³‡æ–™å¤¾è£¡é¢ç”¢ç”Ÿ migrations çš„ç´€éŒ„ï¼Œä¸¦ä¸” postgresql çš„è³‡æ–™åº«ä¹Ÿæœƒæ–°å¢ç›¸å°æ‡‰çš„ tableã€‚</p>
<h2 id="å¯¦ä½œ-API"><a href="#å¯¦ä½œ-API" class="headerlink" title="å¯¦ä½œ API"></a>å¯¦ä½œ API</h2><p>ä»¥ä¸Šæ˜¯å®‰è£å…©ç¨® ORM çš„å·®åˆ¥ï¼Œæ¥ä¸‹ä¾†æˆ‘å€‘ä¾†è©¦è‘—åœ¨ Express ä¸Šå¯¦ä½œ APIï¼Œåšæ–°å¢è·Ÿè®€å– USER çš„åŠŸèƒ½ã€‚<br>é¦–å…ˆæˆ‘å€‘å…ˆçœ‹ Drizzle çš„åšæ³•ï¼š</p>
<h3 id="Drizzle-1"><a href="#Drizzle-1" class="headerlink" title="Drizzle"></a>Drizzle</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; usersTable, postsTable &#125; = <span class="built_in">require</span>(<span class="string">&quot;./db/schema&quot;</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/users&quot;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> users = <span class="keyword">await</span> db.<span class="title function_">select</span>().<span class="title function_">from</span>(usersTable);</span><br><span class="line">  res.<span class="title function_">json</span>(users);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&quot;/users&quot;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> user = <span class="keyword">await</span> db.<span class="title function_">insert</span>(usersTable).<span class="title function_">values</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: req.<span class="property">body</span>.<span class="property">name</span>,</span><br><span class="line">    <span class="attr">age</span>: req.<span class="property">body</span>.<span class="property">age</span>,</span><br><span class="line">    <span class="attr">email</span>: req.<span class="property">body</span>.<span class="property">email</span>,</span><br><span class="line">    <span class="attr">address</span>: req.<span class="property">body</span>.<span class="property">address</span></span><br><span class="line">  &#125;);</span><br><span class="line">  res.<span class="title function_">status</span>(<span class="number">201</span>).<span class="title function_">json</span>(&#123; <span class="attr">message</span>: <span class="string">&quot;æ–°å¢æˆåŠŸ&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&quot;/posts&quot;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> post = <span class="keyword">await</span> db.<span class="title function_">insert</span>(postsTable).<span class="title function_">values</span>(&#123;</span><br><span class="line">    <span class="attr">title</span>: req.<span class="property">body</span>.<span class="property">title</span>,</span><br><span class="line">    <span class="attr">content</span>: req.<span class="property">body</span>.<span class="property">content</span>,</span><br><span class="line">    <span class="attr">user_id</span>: req.<span class="property">body</span>.<span class="property">user_id</span></span><br><span class="line">  &#125;);</span><br><span class="line">  res.<span class="title function_">status</span>(<span class="number">201</span>).<span class="title function_">json</span>(&#123; <span class="attr">message</span>: <span class="string">&quot;æ–°å¢æˆåŠŸ&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/posts&quot;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> posts = <span class="keyword">await</span> db.<span class="title function_">select</span>().<span class="title function_">from</span>(postsTable);</span><br><span class="line">  res.<span class="title function_">json</span>(posts);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>è¨˜å¾—è¦ä½¿ç”¨ <code>express.json()</code> ä¸ç„¶æœƒæ²’è¾¦æ³•æ­£ç¢ºæ–°å¢ JSON çš„æ ¼å¼ã€‚<br>æ¥ä¸‹ä¾†æ²’æ„å¤–çš„è©±æ‡‰è©²å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨ user å’Œ posts çš„æ–°å¢å’Œè®€å– API äº†ã€‚</p>
<h3 id="Prisma-1"><a href="#Prisma-1" class="headerlink" title="Prisma"></a>Prisma</h3><p>Prisma ORM çš„æ–¹å¼ï¼Œæœƒéœ€è¦é€é PrismaClient ä¾†å»ºç«‹ä¸€å€‹å¯¦ä¾‹ï¼Œä¸¦ä¸”é€éå®ƒåœ¨æˆ‘å€‘è¨­å®šçš„æ¶æ§‹ä¸‹ï¼Œåˆ†åˆ¥å»åšè³‡æ–™åº«çš„æ“ä½œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">const</span> dotenv = <span class="built_in">require</span>(<span class="string">&quot;dotenv&quot;</span>);</span><br><span class="line">dotenv.<span class="title function_">config</span>();</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">PrismaClient</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;@prisma/client&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> prisma = <span class="keyword">new</span> <span class="title class_">PrismaClient</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/users&quot;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> users = <span class="keyword">await</span> prisma.<span class="property">users</span>.<span class="title function_">findMany</span>();</span><br><span class="line">  res.<span class="title function_">json</span>(users);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&quot;/users&quot;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> user = <span class="keyword">await</span> prisma.<span class="property">users</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: req.<span class="property">body</span>.<span class="property">name</span>,</span><br><span class="line">      <span class="attr">age</span>: req.<span class="property">body</span>.<span class="property">age</span>,</span><br><span class="line">      <span class="attr">email</span>: req.<span class="property">body</span>.<span class="property">email</span>,</span><br><span class="line">      <span class="attr">address</span>: req.<span class="property">body</span>.<span class="property">address</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  res.<span class="title function_">status</span>(<span class="number">201</span>).<span class="title function_">json</span>(&#123; <span class="attr">message</span>: <span class="string">&quot;User created&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/posts&quot;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> posts = <span class="keyword">await</span> prisma.<span class="property">posts</span>.<span class="title function_">findMany</span>();</span><br><span class="line">  res.<span class="title function_">json</span>(posts);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&quot;/posts&quot;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> post = <span class="keyword">await</span> prisma.<span class="property">posts</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: req.<span class="property">body</span>.<span class="property">title</span>,</span><br><span class="line">      <span class="attr">content</span>: req.<span class="property">body</span>.<span class="property">content</span>,</span><br><span class="line">      <span class="attr">user_id</span>: req.<span class="property">body</span>.<span class="property">user_id</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  res.<span class="title function_">status</span>(<span class="number">201</span>).<span class="title function_">json</span>(&#123; <span class="attr">message</span>: <span class="string">&quot;Post created&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server is running on port 3000&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="æ¯”è¼ƒ"><a href="#æ¯”è¼ƒ" class="headerlink" title="æ¯”è¼ƒ"></a>æ¯”è¼ƒ</h2><h3 id="å®‰è£"><a href="#å®‰è£" class="headerlink" title="å®‰è£"></a>å®‰è£</h3><p>å®‰è£ä»¥åŠè¨­å®šçš„éƒ¨åˆ†ï¼Œåœ¨ Prisma æ¯”è¼ƒç°¡å–®ï¼Œåªè¦ä¸‹ä¸€å€‹æŒ‡ä»¤ï¼Œå°±æœƒè‡ªå‹•åœ¨å°ˆæ¡ˆä¸­è‡ªå‹•å»ºç«‹ä¸€äº›æª”æ¡ˆï¼Œä¾‹å¦‚ schema ä»¥åŠç›¸é—œçš„è¨­å®šæª”ï¼›ç›¸å Drizzle å°±ç¨å¾®æ¯”è¼ƒéº»ç…©ä¸€é»ã€‚</p>
<h3 id="schema"><a href="#schema" class="headerlink" title="schema"></a>schema</h3><p>å…©é‚Šåœ¨ schema çš„ä½¿ç”¨å„æœ‰å„ªç¼ºé»ï¼š</p>
<h4 id="Prisma-2"><a href="#Prisma-2" class="headerlink" title="Prisma"></a>Prisma</h4><ul>
<li>å„ªé»ï¼šæœ‰ä¸€å€‹ç¨æœ‰çš„æª”æ¡ˆä¾†ç®¡ç†ï¼Œè¦–è¦ºä¸Šæ–¹ä¾¿é–±è®€ï¼Œå°æ–¼ table çš„æ¶æ§‹ä¸€ç›®äº†ç„¶ï¼Œå‹åˆ¥ä»¥åŠæ˜¯å¦å¿…å¡«ä¹Ÿè »æ¸…æ¥šã€‚</li>
</ul>
<p><img src="https://i.imgur.com/P5c3cHr.png"></p>
<ul>
<li>ç¼ºé»ï¼šä¸å¤ªå¥½æ’°å¯«ï¼Œå¦‚æœæ˜¯æƒ³è¦åœ¨ <code>schema.prisma</code> æ‰‹å¯«çš„è©±æœ‰é»å­¸ç¿’æˆæœ¬ï¼Œéœ€è¦æŒ‰ç…§ Prisma ç‰¹æœ‰çš„èªæ³•å»å¯«ã€‚</li>
</ul>
<h4 id="Drizzle-2"><a href="#Drizzle-2" class="headerlink" title="Drizzle"></a>Drizzle</h4><ul>
<li>å„ªé»ï¼šå¯«æ³•å°±æ˜¯ä¸€èˆ¬çš„ JSï¼Œè€Œä¸”è·ŸåŸæœ¬çš„ SQL éå¸¸ç›¸ä¼¼ï¼Œå­¸ç¿’æˆæœ¬æ¯”è¼ƒä½ã€‚</li>
</ul>
<p><img src="https://i.imgur.com/boVP7JB.png"></p>
<ul>
<li>ç¼ºé»ï¼š æ¶æ§‹ä¸Šè·Ÿ Prisma ç›¸æ¯”ï¼Œæ¯”è¼ƒæ²’é€™éº¼å¥½é–±è®€ï¼Œä½†ç†Ÿæ‚‰ JS çš„é–‹ç™¼è€…æ‡‰è©²ä¹Ÿèƒ½å¾ˆå¿«ä¸Šæ‰‹ã€‚</li>
</ul>
<h3 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h3><p>åœ¨æ“ä½œä¸Šï¼ŒDrizzle è·ŸåŸæœ¬ SQL èªæ³•éå¸¸é¡ä¼¼ï¼Œé€™å°æ–¼ç†Ÿæ‚‰ SQL çš„é–‹ç™¼è€…ä¾†èªªï¼Œæ˜¯ä¸€å€‹å·¨å¤§çš„å„ªå‹¢ã€‚</p>
<p><img src="https://i.imgur.com/dOXHmhL.png"></p>
<p>Prisma æœ‰è‡ªå·±çš„æ–¹æ³•ï¼Œæ‰€ä»¥å‹¢å¿…è¦å­¸ç¿’ä¸€ä¸‹ï¼Œå¯èƒ½æœƒæœ‰ä¸€äº›é™£ç—›æœŸã€‚</p>
<p><img src="https://i.imgur.com/q2sayGl.png"></p>
<h2 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h2><p>ä»¥ç›®å‰çš„ JS ç”Ÿæ…‹ä¾†èªªï¼Œå…©å€‹ ORM éƒ½æ˜¯å¾ˆæ£’çš„å·¥å…·ã€‚Prisma ç›®å‰åœ¨ GitHub æ“æœ‰ 40.7k çš„æ˜Ÿæ˜Ÿæ•¸ï¼Œè€Œ Drizzle å‰‡æ˜¯æ“æœ‰ 25.7k çš„æ˜Ÿæ˜Ÿæ•¸ã€‚<br>è€Œä¸”ç›®å‰å…©è€…çš„ä¸‹è¼‰é‡æ˜é¡¯æœ‰ä¸€äº›å·®è·ï¼Œä»£è¡¨è‘— Prisma æ˜¯æ¯”è¼ƒç†±é–€çš„é¸é …ã€‚<br><img src="https://i.imgur.com/Lf95O0R.png" alt="npm trends"></p>
<blockquote>
<p>åœ–ç‰‡ä¾†æº npm trends</p>
</blockquote>
<p>ä½† Drizzle å…¶å¯¦æ˜¯éå¸¸å¹´è¼•çš„ ORMï¼Œæ ¹æ“š <a target="_blank" rel="noopener" href="https://orm.drizzle.team/docs/latest-releases">Drizzle å®˜ç¶²</a>é é¢é¡¯ç¤ºï¼Œæœ€æ—©æ˜¯åœ¨ 2022 å¹´ 7 æœˆæ¨å‡ºã€‚åœ¨é€™ä¹‹å‰çš„ <a target="_blank" rel="noopener" href="https://risingstars.js.org/2024/en">JavaScript Rising Stars</a> å ±å‘Šä¸­ï¼Œéƒ½æ˜¯ Prisma åœ¨é€™å€‹æ¦œå–®ä¸Šï¼ŒDrizzle å‡ºç¾ä¹‹å¾Œå°±çœ‹ä¼¼å–ä»£äº† Prisma äº†ï¼Œæ˜¯ä¸€å€‹å¯ä»¥è§€å¯Ÿä¸¦ä¸”åƒè€ƒçš„éƒ¨åˆ†ã€‚</p>
<p>åœ¨é–‹ç™¼é¸æ“‡çš„æƒ…å¢ƒä¸Šï¼Œå¦‚æœåœ˜éšŠæ¯”è¼ƒç†Ÿæ‚‰ SQL çš„è©±ï¼Œé‚£éº¼é¸æ“‡ Drizzle æ˜¯ä¸€å€‹æ¯”è¼ƒå¥½çš„é¸æ“‡ï¼Œå¦‚æœèªªæƒ³è¦æœ‰æ¯”è¼ƒå®Œæ•´çš„å·¥å…·éˆï¼Œé‚£éº¼å¯ä»¥è€ƒæ…®é¸æ“‡ Prismaã€‚</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">Bucky Chu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é€£çµ: </span><span class="post-copyright-info"><a href="http://buckychu.im/2024/12/19/drizzle-vs-prisma/">http://buckychu.im/2024/12/19/drizzle-vs-prisma/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæ¬Šè²æ˜: </span><span class="post-copyright-info">æœ¬éƒ¨è½æ ¼æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥è²æ˜å¤–ï¼Œå‡æ¡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è¨±å¯å”è­°ã€‚è½‰è¼‰è«‹è¨»æ˜ä¾†è‡ª <a href="http://buckychu.im" target="_blank">Bucky's Code Journey</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/orm/">orm</a><a class="post-meta__tags" href="/tags/express/">express</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/09/14/setup-to-first-flutter-project/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">å¾æ‰‹æŠŠæ‰‹ç’°å¢ƒè¨­å®šåˆ°å»ºç«‹ç¬¬ä¸€å€‹ Flutter å°ˆæ¡ˆ</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Bucky Chu</div><div class="author-info__description">Join Bucky Chu on his journey through the realms of front-end, back-end, and full-stack development.</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">107</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">æ¨™ç±¤</div><div class="length-num">118</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">åˆ†é¡</div><div class="length-num">27</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/bucky0112"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/bucky0112" target="_blank" title="GitHub"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:bucky0112@gmail.com" target="_blank" title="E-Mail"><i class="far fa-envelope"></i></a><a class="social-icon" href="https://twitter.com/bucky0112" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a><a class="social-icon" href="https://www.facebook.com/timmychu0112" target="_blank" title="FB Page"><i class="fab fa-facebook"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æœ¬ç¶²ç«™æ›´æ–°è‡³ hexo 5.4.0</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®éŒ„</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%9D%E6%AF%94%E8%BC%83"><span class="toc-number">1.</span> <span class="toc-text">å®‰è£æ¯”è¼ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Drizzle"><span class="toc-number">1.1.</span> <span class="toc-text">Drizzle</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%9D-drizzle-%E5%92%8C-pg"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. å®‰è£ drizzle å’Œ pg</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%80%A3%E6%8E%A5%E8%B3%87%E6%96%99%E5%BA%AB"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. é€£æ¥è³‡æ–™åº«</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%96%B0%E5%A2%9E-table"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. æ–°å¢ table</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%A8%AD%E5%AE%9A-Drizzle-config"><span class="toc-number">1.1.4.</span> <span class="toc-text">4. è¨­å®š Drizzle config</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%9B%B4%E6%96%B0%E8%B3%87%E6%96%99%E5%BA%AB"><span class="toc-number">1.1.5.</span> <span class="toc-text">5. æ›´æ–°è³‡æ–™åº«</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Prisma"><span class="toc-number">1.2.</span> <span class="toc-text">Prisma</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%9D-Prisma"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. å®‰è£ Prisma</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%80%A3%E6%8E%A5%E8%B3%87%E6%96%99%E5%BA%AB-1"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. é€£æ¥è³‡æ–™åº«</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%96%B0%E5%A2%9E-table-1"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. æ–°å¢ table</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%9B%B4%E6%96%B0%E8%B3%87%E6%96%99%E5%BA%AB"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. æ›´æ–°è³‡æ–™åº«</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%A6%E4%BD%9C-API"><span class="toc-number">2.</span> <span class="toc-text">å¯¦ä½œ API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Drizzle-1"><span class="toc-number">2.1.</span> <span class="toc-text">Drizzle</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Prisma-1"><span class="toc-number">2.2.</span> <span class="toc-text">Prisma</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AF%94%E8%BC%83"><span class="toc-number">3.</span> <span class="toc-text">æ¯”è¼ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%9D"><span class="toc-number">3.1.</span> <span class="toc-text">å®‰è£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#schema"><span class="toc-number">3.2.</span> <span class="toc-text">schema</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Prisma-2"><span class="toc-number">3.2.1.</span> <span class="toc-text">Prisma</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Drizzle-2"><span class="toc-number">3.2.2.</span> <span class="toc-text">Drizzle</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C"><span class="toc-number">3.3.</span> <span class="toc-text">æ“ä½œ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B5%90%E8%AB%96"><span class="toc-number">4.</span> <span class="toc-text">çµè«–</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/12/19/drizzle-vs-prisma/" title="Drizzle v.s Prisma"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Drizzle v.s Prisma"/></a><div class="content"><a class="title" href="/2024/12/19/drizzle-vs-prisma/" title="Drizzle v.s Prisma">Drizzle v.s Prisma</a><time datetime="2024-12-19T02:55:45.000Z" title="ç™¼è¡¨æ–¼ 2024-12-19 10:55:45">2024-12-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/14/setup-to-first-flutter-project/" title="å¾æ‰‹æŠŠæ‰‹ç’°å¢ƒè¨­å®šåˆ°å»ºç«‹ç¬¬ä¸€å€‹ Flutter å°ˆæ¡ˆ"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="å¾æ‰‹æŠŠæ‰‹ç’°å¢ƒè¨­å®šåˆ°å»ºç«‹ç¬¬ä¸€å€‹ Flutter å°ˆæ¡ˆ"/></a><div class="content"><a class="title" href="/2024/09/14/setup-to-first-flutter-project/" title="å¾æ‰‹æŠŠæ‰‹ç’°å¢ƒè¨­å®šåˆ°å»ºç«‹ç¬¬ä¸€å€‹ Flutter å°ˆæ¡ˆ">å¾æ‰‹æŠŠæ‰‹ç’°å¢ƒè¨­å®šåˆ°å»ºç«‹ç¬¬ä¸€å€‹ Flutter å°ˆæ¡ˆ</a><time datetime="2024-09-13T16:08:54.000Z" title="ç™¼è¡¨æ–¼ 2024-09-14 00:08:54">2024-09-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/13/hello-world-conf-rust-web-scraping/" title="Rust å¾é›¶é–‹å§‹ç¶²é çˆ¬èŸ²(2024 Hello World)"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust å¾é›¶é–‹å§‹ç¶²é çˆ¬èŸ²(2024 Hello World)"/></a><div class="content"><a class="title" href="/2024/09/13/hello-world-conf-rust-web-scraping/" title="Rust å¾é›¶é–‹å§‹ç¶²é çˆ¬èŸ²(2024 Hello World)">Rust å¾é›¶é–‹å§‹ç¶²é çˆ¬èŸ²(2024 Hello World)</a><time datetime="2024-09-12T16:43:33.000Z" title="ç™¼è¡¨æ–¼ 2024-09-13 00:43:33">2024-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/12/use-rust-do-web-scraping/" title="ç”¨ Rust å¯«ä¸€å€‹ç¶²é çˆ¬èŸ²"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ç”¨ Rust å¯«ä¸€å€‹ç¶²é çˆ¬èŸ²"/></a><div class="content"><a class="title" href="/2024/08/12/use-rust-do-web-scraping/" title="ç”¨ Rust å¯«ä¸€å€‹ç¶²é çˆ¬èŸ²">ç”¨ Rust å¯«ä¸€å€‹ç¶²é çˆ¬èŸ²</a><time datetime="2024-08-11T17:16:31.000Z" title="ç™¼è¡¨æ–¼ 2024-08-12 01:16:31">2024-08-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/28/type-or-interface/" title="Type or Interface?"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Type or Interface?"/></a><div class="content"><a class="title" href="/2024/07/28/type-or-interface/" title="Type or Interface?">Type or Interface?</a><time datetime="2024-07-28T07:55:31.000Z" title="ç™¼è¡¨æ–¼ 2024-07-28 15:55:31">2024-07-28</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Bucky Chu</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¡Œ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é–±è®€æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ·ºè‰²å’Œæ·±è‰²æ¨¡å¼è½‰æ›"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å–®æ¬„å’Œé›™æ¬„åˆ‡æ›"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è¨­å®š"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®éŒ„"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é ‚éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>